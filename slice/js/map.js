function initialize(){geocoder=new google.maps.Geocoder}var Marker,map,markerCounter=0,flightPlanCoordinates=[],myPos={lat:-34.397,lng:150.644},markeArr=[],LinePathArr=[],service,geocoder,CityName=[],infowindow,nameCounter=0,name,geocoder,city,Valid=!0,CountrList=[];initMap=function(){map=new google.maps.Map(document.getElementById("map"),{center:myPos,zoom:4,styles:[]})},initMarker=function(e,n){var a=new google.maps.LatLng(e,n);geocoder.geocode({latLng:a},function(a,t){if(t==google.maps.GeocoderStatus.OK)if(a[1]){Valid=!0,name=a[0].formatted_address;for(var o=0;o<a[0].address_components.length;o++)for(var r=0;r<a[0].address_components[o].types.length;r++)if("administrative_area_level_1"==a[0].address_components[o].types[r]){city=a[0].address_components[o];break}name=city.short_name+" "+city.long_name,CountrList.push(name),console.log(CountrList);var i={lat:e,lng:n},l="images/marker.png";Marker=new google.maps.Marker({position:i,draggable:!0,map:map,icon:l}),markeArr.push(Marker),infowindow=new google.maps.InfoWindow({content:name}),infowindow.open(map,Marker),google.maps.event.addListener(Marker,"dragend",function(e){var n,a;flightPathClean();for(var t=0;t<markeArr.length;t++)n=markeArr[t].position.lat(),a=markeArr[t].position.lng(),flightPath(n,a)})}else Valid=!1;else Valid=!1;Valid&&flightPath(e,n)})},MapClick=function(){var e;google.maps.event.addListener(map,"click",function(n){e=n.latLng.lat(),lng=n.latLng.lng(),chengeMarkerCoordinate(e,lng)})},chengeMarkerCoordinate=function(e,n){initMarker(e,n)},flightPathClean=function(){flightPlanCoordinates=[];for(var e=0;e<LinePathArr.length;e++)LinePathArr[e].setMap(null)},flightPath=function(e,n){element={},element.lat=e,element.lng=n,flightPlanCoordinates.push(element),markeArr.length>0&&(LinePath=new google.maps.Polyline({path:flightPlanCoordinates,geodesic:!0,strokeColor:"#fff ",strokeOpacity:1,strokeWeight:2}),LinePathArr.push(LinePath),LinePath.setMap(map))},TaskManager=function(){initMap(),MapClick(),initialize()},$(document).ready(function(){TaskManager()});