function initialize(){geocoder=new google.maps.Geocoder}var Marker,map,markerCounter=0,flightPlanCoordinates=[],myPos={lat:46.635417,lng:32.616867},markeArr=[],LinePathArr=[],InfoBoxArr=[],service,geocoder,CityName=[],infowindow,nameCounter=0,name,geocoder,city,MarkerCounter=0,CountrList=[],ArrCity=[];initMap=function(){map=new google.maps.Map(document.getElementById("map"),{center:myPos,zoom:9,styles:[{stylers:[{color:"#ffffff"},{visibility:"on"},{weight:.5}]},{elementType:"geometry",stylers:[{color:"#212121"},{visibility:"on"}]},{elementType:"geometry.fill",stylers:[{color:"#7984ce"},{visibility:"on"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"},{weight:1}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#ffffff"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#ffffff"},{visibility:"on"},{weight:1}]},{featureType:"administrative.land_parcel",stylers:[{color:"#e0def5"},{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#ad3033"}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative.neighborhood",elementType:"geometry.fill",stylers:[{color:"#ad3033"},{visibility:"on"}]},{featureType:"administrative.neighborhood",elementType:"geometry.stroke",stylers:[{color:"#ad3033"},{visibility:"on"}]},{featureType:"administrative.province",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{visibility:"simplified"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#d2c7f1"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dbdaef"},{visibility:"off"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",stylers:[{color:"#ffffff"},{visibility:"on"},{weight:.5}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#6569ba"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]})},findCity=function(e){var t=new google.maps.LatLng(e.position.lat(),e.position.lng());geocoder.geocode({latLng:t},function(t,o){if(o==google.maps.GeocoderStatus.OK){if(!t[1])return 0;for(i=0;i<t[0].address_components.length;i++){if("locality"==t[0].address_components[i].types[0])return name=t[0].address_components[i].long_name,CityName.push(name),setInfoBox(name,e),flightPath(e.position.lat(),e.position.lng()),MarkerCounter++,0;if("administrative_area_level_2"==t[0].address_components[i].types[0])return name=t[0].address_components[i].short_name,CityName.push(name),setInfoBox(name,e),flightPath(e.position.lat(),e.position.lng()),MarkerCounter++,0}}})},initMarker=function(e,t){var o={lat:e,lng:t},r="images/marker.png";Marker=new google.maps.Marker({position:o,draggable:!0,shadowStyle:1,padding:0,backgroundColor:"rgb(57,57,57)",borderRadius:5,arrowSize:10,borderWidth:1,borderColor:"#2c2c2c",disableAutoPan:!0,hideCloseButton:!0,arrowPosition:30,backgroundClassName:"transparent",arrowStyle:2,map:map,icon:r}),markeArr.push(Marker),findCity(Marker),google.maps.event.addListener(Marker,"dragend",function(e){var t,o;flightPathClean(),console.log(markeArr.length),console.log(markeArr);for(var r=0;r<markeArr.length;r++)t=markeArr[r].position.lat(),o=markeArr[r].position.lng(),flightPath(t,o),refindCity(markeArr[r])})},finalGet=function(){CityName=[];for(var e=0;e<markeArr.length;e++)finalGetCity(markeArr[e])},finalGetCity=function(e){var t=new google.maps.LatLng(e.position.lat(),e.position.lng());geocoder.geocode({latLng:t},function(e,t){if(t==google.maps.GeocoderStatus.OK){if(!e[1])return 0;for(i=0;i<e[0].address_components.length;i++){if("locality"==e[0].address_components[i].types[0])return name=e[0].address_components[i].long_name,CityName.push(name),localStorage.setItem("CityName",CityName),0;if("administrative_area_level_2"==e[0].address_components[i].types[0])return name=e[0].address_components[i].short_name,CityName.push(name),localStorage.setItem("CityName",CityName),0}}})},MapClick=function(){var e;google.maps.event.addListener(map,"click",function(t){e=t.latLng.lat(),lng=t.latLng.lng(),MarkerCounter<8&&initMarker(e,lng)})},refindCity=function(e){var t=new google.maps.LatLng(e.position.lat(),e.position.lng());geocoder.geocode({latLng:t},function(t,o){if(o==google.maps.GeocoderStatus.OK){if(!t[1])return 0;for(i=0;i<t[0].address_components.length;i++){if("locality"==t[0].address_components[i].types[0])return name=t[0].address_components[i].long_name,resetInfoBox(e,name),0;if("administrative_area_level_2"==t[0].address_components[i].types[0])return name=t[0].address_components[i].short_name,resetInfoBox(e,name),0}}})},resetInfoBox=function(e,t){var o='<div class="MyInfo">'+t+"</div>";infowindow=new google.maps.InfoWindow({content:o}),infowindow.open(map,e)},flightPathClean=function(){flightPlanCoordinates=[];for(var e=0;e<LinePathArr.length;e++)LinePathArr[e].setMap(null)},setInfoBox=function(e,t){var o='<div class="MyInfo">'+e+"</div>";infowindow=new google.maps.InfoWindow({content:o}),infowindow.open(map,t)},flightPath=function(e,t){element={},element.lat=e,element.lng=t,flightPlanCoordinates.push(element),markeArr.length>0&&(LinePath=new google.maps.Polyline({path:flightPlanCoordinates,geodesic:!0,strokeColor:"#fff ",strokeOpacity:1,strokeWeight:2}),LinePathArr.push(LinePath),LinePath.setMap(map))},NextStep=function(){$(".choose_btn").click(function(e){e.preventDefault(),finalGet()})},TaskManager=function(){initMap(),MapClick(),initialize()},$(document).ready(function(){TaskManager(),NextStep(),setInterval(function(){$(".gm-style-iw").prev().hide()},50)});